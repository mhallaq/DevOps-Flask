# DevOps-Flask



<!-- PROJECT SHIELDS -->
<!--
*** I'm using markdown "reference style" links for readability.
*** Reference links are enclosed in brackets [ ] instead of parentheses ( ).
*** See the bottom of this document for the declaration of the reference variables
*** for contributors-url, forks-url, etc. This is an optional, concise syntax you may use.
*** https://www.markdownguide.org/basic-syntax/#reference-style-links
-->




  <h3 align="center">Calories Tracker App</h3>

  



<!-- TABLE OF CONTENTS -->
<details open="open">
  <summary>Table of Contents</summary>
  <ol>
    <li>
      <a href="#about-the-project">About The Project</a>
      <ul>
        <li><a href="#built-with">Built With</a></li>
      </ul>
    </li>
    <li>
      <a href="#getting-started">Getting Started</a>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#Building-the-application">Installation</a></li>
      </ul>
    </li>
    <li><a href="#usage">Usage</a></li>
    <li><a href="#contributing">Contributing</a></li>
    <li><a href="#license">License</a></li>
    <li><a href="#contact">Contact</a></li>
    <li><a href="#acknowledgements">Acknowledgements</a></li>
  </ol>
</details>



<!-- ABOUT THE PROJECT -->
## About The Project


This project is built to showcase how can we build CI/CD pipeline and implement it using flask.Furthermore this project is to show how can we use flask and docker to implement microservices/service oriented architecture.This is achieved by building application then containiraize it using Docker containers and Docker Swarm. 

Simply, this aplication generate randomely latitude and logitude numbers and then retrieve the weather information for this location.I have used Openweathermap API (https://openweathermap.org/api) 

This web application is comprised of these services:
* Service 1: Longitude services to generate random longitude.
* Service 2: Latitude services to generate random latitude.
* Service 3 (back-end): This get the random longitude and latitude and
  an call an openweather map api passing this long, and lat and get the current weather infromation.
* Service 4 (front-end): The web application will call service 3 and show the result to the end user.On the same time these information is stored in mysql database table. 

Here you are screenshots of the application depcting the web app functionality.

<br/>

## Application design

<br/>

To design this simple MVP , I have designed the database to store user's data in 3 relations as show in the following picture.


![ER diagram](https://i.imgur.com/P7ZxwvG.png)

<br/>

As shown in the design of the database the primary key is ID , which is autogenerated number.This is a simple application to showcase the micorservices and that's why it has a simmle design.



<br/>
 
### Built With:

This project built using the following technologies . 
* [Flask](https://flask.palletsprojects.com/en/1.1.x/)
* [MySQL](https://www.mysql.com/)
* [HTML](https://html.spec.whatwg.org/multipage/)
* [Bootstrap](https://getbootstrap.com)



<!-- GETTING STARTED -->
## Getting Started

This section gives instructions on setting up your project locally.
To get a local copy up and running follow these simple example steps.

### Prerequisites

This is an example of how to list things you need to use the software and how to install them.


### Building the application

Note: These steps is relevant to any environments provided you can run docker container locally.

1. Clone the repo
   ```sh
   git clone https://github.com/mhallaq/DevOps-Flask.git
   ```
2. Create bridge network
   ```sh
   docker network create weather-net
   ```
3. build docker images
   ```sh
   docker build -t mhallaq/lat-service:latest .
   docker build -t mhallaq/lon-service:latest .
   docker build -t mhallaq/back-end:latest .
   docker build -t mhallaq/front-end:latest .
   ```
4. Run the containers
   ```
   docker run -d -p 5003:5003 --network  weather-net --name lat-service  mhallaq/lat-service .
   docker run -d -p 5002:5002 --network  weather-net --name lon-service  mhallaq/lon-service .
   docker run -d -p 5001:5001 --network  weather-net --name back-end  mhallaq/back-end .
   docker run -d -p 5000:5000 --network  weather-net --name front-end  mhallaq/front-end .
   ```
<br/>

### Testing the application

To test this application I have used mock testing , since the API is hard to test it online.

```

pytest --cov=app 

or

pytest --cov=app --cov-report html

```

<br/>

### CI/CD pipeline
This application is containirzed and you need to run Docker containers after building the image to let the services in the application communicate together and show the results in the webpage.So the artifacts of this application are docker images which then can be ported and executed for testing and then for deplyement , finally to mov to the production.

![CI/CD](https://i.imgur.com/uZM27LR.jpg)

<br/>

![CI/CD2](https://i.imgur.com/6wfxYTP.png)

<br/>

![NGINX](https://i.imgur.com/lO4ikSz.png)

<br/>

### Application Screenshots

<br/>

### Home Page
![Home Page](https://i.imgur.com/iqRExF1.png)



### Agile Kanban board

![Home Page](https://i.imgur.com/UVHh2Sk.png)


<br/>

### Risk assessment

![Home Page](https://i.imgur.com/korIhkT.png)
![Home Page](https://i.imgur.com/xU3EDli.png)


<!-- CONTRIBUTING -->
## Contributing

Contributions are what make the open source community such an amazing place to be learn, inspire, and create. Any contributions you make are **greatly appreciated**.

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request




<!-- LICENSE -->
## License

Distributed under the MIT License. See `LICENSE` for more information.



<!-- CONTACT -->
## Contact

Mohammed Alhallaq 
- mhallaq75@yahoo.com

Project Link: [https://github.com/mhallaq/flask-calories-tracker](https://github.com/your_username/repo_name)



<!-- ACKNOWLEDGEMENTS -->
## Acknowledgements
* [Flask-SQLAlchemy](https://flask-sqlalchemy.palletsprojects.com/en/2.x/)
* [Jinja2](https://jinja.palletsprojects.com/en/2.11.x/)
* [SQLAlchemy](https://www.sqlalchemy.org/)
* [Werkzeug](https://werkzeug.palletsprojects.com/en/1.0.x/)
* [Pytest](https://docs.pytest.org/en/stable/)
* [Pytest-cov](https://pytest-cov.readthedocs.io/en/latest/)
* [Flask testing](https://flask.palletsprojects.com/en/1.1.x/testing/)
* [PyMysql](https://www.mysql.com/)





<!-- MARKDOWN LINKS & IMAGES -->
<!-- https://www.markdownguide.org/basic-syntax/#reference-style-links -->
